---
sidebar_position: 4
hide_title: true
slug: /quickstart/tpl
title: 从模板创建项目
keywords: [Gone, QuickStart, Template, Go, Web框架, 项目模板, Gin, XORM, Viper, 后端开发, 快速入门, 依赖注入]
description: 学习如何使用Gone框架的项目模板快速搭建Go Web应用。本教程将引导您通过gonectl工具，基于gin+xorm+viper模板创建、配置和运行一个功能完善的Web项目。
---

# 从模板创建项目

Gone框架提供了丰富的项目模板，可以帮助你快速搭建各种类型的应用。本教程将指导你如何使用`gonectl`工具从模板创建一个Web项目。

![](/img/quickstart-tpl.gif)

## 1. 安装gonectl工具

首先，确保你已经安装了`gonectl`命令行工具。它是Gone框架的核心工具，用于项目管理、代码生成等功能。如果尚未安装，请在终端中执行以下命令：

```bash
go install github.com/gone-io/gonectl@latest
```

安装完成后，你可以在终端中输入`gonectl`来验证是否安装成功。

更多安装方法，请参考[gonectl安装](./安装/gonectl.md)。

## 2. 查看内置模板列表

`gonectl`内置了多种项目模板，你可以通过以下命令查看所有可用的模板：

```bash
gonectl create -l
```

执行后，你将看到类似以下的输出，列出了所有模板及其简要描述：

```text
Available templates:
  - config_center/apollo	Apollo Configuration Center Example
  - config_center/consul	Consul Configuration Center Example
  - config_center/etcd  	Etcd Configuration Center Example
  - config_center/nacos 	Nacos Configuration Center Example
  - es                  	elastic example project
  - gin+gorm+viper      	simple web demo using gin, gorm, viper, mysql
  - gin+xorm+viper      	web demo: use gin, xorm, viper and xorm
  - grpc                	Gone gRPC example project demonstrating how to build gRPC services with Gone framework
  - grpc_use_discovery  	Example of gRPC with Service Discovery
  - http_use_discovery  	http service discovery example using gin
  - mcp/http            	MCP server use http transport
  - mcp/quick_start     	MCP server quick start example
  - mcp/stdio           	MCP server example with standard input/output
  - openai              	OpenAI model client integration
  - otel/log/collect+traceid	Log Collection with OpenTelemetry，and record traceId
  - otel/log/simple     	Using OpenTelemetry for Log Collection simple example
  - otel/meter/grpc     	Metrics monitoring with OpenTelemetry via OTLP/gRPC protocol
  - otel/meter/http     	OpenTelemetry Metrics Monitoring via OTLP/HTTP
  - otel/meter/prometheus	Integrating OpenTelemetry with Prometheus
  - otel/meter/simple   	Metrics Monitoring with OpenTelemetry
  - otel/tracer/grpc    	Using OpenTelemetry for Distributed Tracing over gRPC Protocol
  - otel/tracer/http    	Demonstrate distributed tracing using goner/gin, goner/urllib, goner/otel/tracer/http + jaeger
  - otel/tracer/quick-start	OpenTelemetry Quick Start Example for Distributed Tracing
  - otel/tracer/simple  	OpenTelemetry Simple Tracing Example
  - provide_func        	Example of using Provide function to integrate third-party components
  - provider            	Define Provider components for third-party integration
  - simple              	simple example, use viper for configuration reading
  - urllib              	http client example using goner/urllib
  - zap                 	Using Zap Logger in Gone Framework
```

## 3. 基于`gin+xorm+viper`模板创建项目

在本教程中，我们将选择`gin+xorm+viper`模板来创建一个Web项目。这个模板集成了Gin（Web框架）、XORM（ORM框架）和Viper（配置管理），是一个功能相对完善的Web应用骨架。

执行以下命令创建项目，并将项目命名为`my-project`：

```bash
gonectl create -t gin+xorm+viper my-project
```

`gonectl`会自动下载模板并创建项目结构。

## 4. 查看项目结构

项目创建完成后，进入`my-project`目录，你可以看到如下的项目结构：

```bash
$ tree
.
├── cmd                # 主程序入口目录
│   └── server         # Web服务入口
│       ├── import.gone.go # 自动生成的导入文件
│       └── main.go      # 主程序
├── config             # 配置文件目录
│   └── default.properties # 默认配置文件
├── docker-compose.yaml # Docker Compose配置文件
├── Dockerfile         # Docker镜像构建文件
├── go.mod             # Go模块定义
├── go.sum             # Go依赖版本锁定
├── init.gone.go       # 自动生成的根初始化文件
├── internal           # 项目内部代码
│   ├── controller     # 控制器层
│   │   ├── init.gone.go
│   │   └── user.go    # 用户相关的控制器
│   ├── interface      # 接口定义层
│   │   ├── entity     # 数据实体定义
│   │   │   └── user.go
│   │   ├── mock       # Mock实现（用于测试）
│   │   │   ├── i_depenendent.gone.go
│   │   │   ├── i_user_token.gone.go
│   │   │   ├── i_user.gone.go
│   │   │   └── load.gone.go
│   │   ├── package.go
│   │   └── service    # 服务接口定义
│   │       ├── i_depenendent.go
│   │       ├── i_user_token.go
│   │       └── i_user.go
│   ├── module         # 业务模块层
│   │   ├── db_sys.go  # 数据库相关模块
│   │   ├── dependent  # 依赖示例模块
│   │   │   ├── dependent.go
│   │   │   └── init.gone.go
│   │   ├── init.gone.go
│   │   └── user       # 用户模块
│   │       ├── init.gone.go
│   │       ├── token.go # Token服务
│   │       ├── user_test.go # 用户服务测试
│   │       └── user.go    # 用户服务实现
│   ├── pkg            # 公共包
│   │   ├── e          # 错误码定义
│   │   │   └── error.go
│   │   └── utils      # 工具类
│   │       ├── ctx.go
│   │       ├── password.go
│   │       └── token.go
│   ├── router         # 路由定义层
│   │   ├── auth_router.go # 需要认证的路由
│   │   ├── init.gone.go
│   │   └── pub_router.go  # 公开路由
│   └── test_loader.go   # 测试加载器
├── Makefile           # 项目构建脚本
├── module.load.go     # 自动生成的模块加载文件
├── package.go
├── README_CN.md       # 中文项目说明
├── README.md          # 英文项目说明
├── scripts            # 脚本目录
│   └── mysql          # MySQL相关脚本
│       └── initdb.d   # 初始化数据库脚本
│           └── user.sql # 用户表结构
└── tests              # 测试目录
    └── api            # API测试
        ├── http-client.env.json # HTTP客户端环境变量
        └── user.http        # 用户API测试脚本 (HTTP文件格式)

22 directories, 43 files
```

这个项目结构遵循了常见的Go项目组织方式，将不同功能的代码划分到不同的目录中，便于维护和扩展。

## 5. 启动项目

该模板项目依赖MySQL数据库。你可以使用`docker-compose`来快速启动一个MySQL实例。

```bash
# 步骤1: 启动MySQL数据库服务 (后台运行)
docker compose up -d mysql

# 步骤2: 下载项目依赖
go mod tidy

# 步骤3: 启动Web项目
gonectl run ./cmd/server
```

`gonectl run`命令会自动编译并运行项目。如果一切顺利，你将看到服务启动的日志，通常服务会监听在`8080`端口。

## 6. 编译Docker镜像 (可选)

如果你希望将项目打包成Docker镜像，可以使用以下命令：
增加环境变量配置文件
```bash
echo "ENVIRONMENT=dev" > .env
```

```bash
docker compose build
```

这会根据项目中的`Dockerfile`构建一个Docker镜像。

## 7. 运行Docker镜像 (可选)

构建完成后，你可以使用`docker-compose`来运行整个应用栈（包括Web服务和数据库）：

```bash
docker compose up -d
```

## 8. 访问项目API

项目启动后，你可以通过HTTP请求来访问其API。以下是一些示例API：

- **用户注册**

  ```bash
  curl -X POST -H "Content-Type: application/json" -d '{"username":"admin","password":"admin"}' http://localhost:8080/api/users/register
  ```

- **用户登录**

  ```bash
  curl -X POST -H "Content-Type: application/json" -d '{"username":"admin","password":"admin"}' http://localhost:8080/api/users/login
  ```

- **获取用户信息** (需要先登录获取Token)

  ```bash
  # 步骤1: 获取Token (请确保安装了jq工具，或者手动从上一个请求的响应中提取token)
  token=$(curl -X POST -H "Content-Type: application/json" -d '{"username":"admin","password":"admin"}' http://localhost:8080/api/users/login | jq -r '.data.token')

  # 步骤2: 携带Token获取用户信息
  curl -X GET -H "Authorization: Bearer $token" http://localhost:8080/api/users/me
  ```

你也可以使用`tests/api/user.http`文件配合REST客户端工具（如VS Code的REST Client插件）来测试这些API。

## 9. 停止项目

当你不再需要运行项目时，可以使用以下命令停止由`docker-compose`启动的服务：

```bash
docker compose down
```

这条命令会停止并移除相关的容器。

通过本教程，你已经学会了如何使用`gonectl`从模板创建一个功能相对完整的Web项目，并了解了其基本结构和运行方式。你可以基于这个模板进行二次开发，快速构建自己的应用。